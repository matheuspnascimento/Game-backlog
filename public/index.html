<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Game Backlog Portfolio</title>

  <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"/>

  <!-- caminhos corretos -->
  <link rel="stylesheet" href="/css/style.css"/>
</head>
<body>
  <header class="shell">
    <div class="brand-row">
      <h1 class="title">Game Backlog Portfolio</h1>

      <button id="addGameBtn" class="btn btn-primary btn-pill">
        <span class="material-icons">add</span>
        Add Game
      </button>
    </div>

    <!-- Toolbar Azul -->
    <section class="toolbar card-ink">
      <div class="toolbar-row">
        <div class="search-slot">
          <span class="material-icons search-ico">search</span>
          <input id="searchInput" class="input" type="search" placeholder="Search game title" autocomplete="off"/>
        </div>

        <div class="select-slot">
          <button class="select-trigger" id="sortTrigger">
            <span id="sortLabel">Sort: Last added</span>
            <span class="material-icons">expand_more</span>
          </button>
          <ul id="sortMenu" class="menu">
            <li data-value="lastAdded">Last added</li>
            <li data-value="lastPlayed">Last played</li>
            <li data-value="rating">Rating (high → low)</li>
            <li data-value="titleAZ">Title A–Z</li>
            <li data-value="titleZA">Title Z–A</li>
            <li data-value="favorites">Favorites only</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- Tabs -->
    <nav class="tabs card-ink">
      <button class="tab tab-active" id="tabProfile">Profile</button>
      <button class="tab" id="tabFavorites">Favorites</button>
      <button class="tab" id="tabPlaying">Playing</button>
      <button class="tab" id="tabPlayed">Played</button>
      <button class="tab" id="tabBacklog">Backlog</button>
    </nav>
  </header>

  <main class="shell">
    <!-- PROFILE -->
    <section id="profileTab">
      <!-- Row 1: Currently Playing + Status donut (alinhados) -->
      <div class="pair">
        <div>
          <h3 class="section-title">Currently Playing (top 3)</h3>
          <div id="profilePlaying" class="grid-covers"></div>
        </div>

        <aside class="chart-card">
          <h4 class="chart-title">Status</h4>
          <div id="statusDonut"></div>
        </aside>
      </div>

      <!-- Row 2: Favorite Games + Ratings bar (alinhados) -->
      <div class="pair mt-24">
        <div>
          <h3 class="section-title">Favorite Games (top 5)</h3>
          <div id="profileFavorites" class="grid-covers"></div>
        </div>

        <aside class="chart-card">
          <h4 class="chart-title">Ratings</h4>
          <div id="ratingsBar"></div>
        </aside>
      </div>
    </section>

    <!-- FAVORITES -->
    <section id="favoritesTab" class="hidden">
      <h3 class="section-title">
        <span>Favorites</span><span id="countFavorites" class="count-badge"></span>
      </h3>
      <div id="favoritesList" class="grid-covers"></div>
    </section>

    <!-- PLAYING -->
    <section id="playingTab" class="hidden">
      <h3 class="section-title">
        <span>Playing</span><span id="countPlaying" class="count-badge"></span>
      </h3>
      <div id="playingList" class="grid-covers"></div>
    </section>

    <!-- PLAYED -->
    <section id="playedTab" class="hidden">
      <h3 class="section-title">
        <span>Played</span><span id="countPlayed" class="count-badge"></span>
      </h3>
      <div id="playedList" class="grid-covers"></div>
    </section>

    <!-- BACKLOG -->
    <section id="backlogTab" class="hidden">
      <h3 class="section-title">
        <span>Backlog</span><span id="countBacklog" class="count-badge"></span>
      </h3>
      <div id="backlogList" class="grid-covers"></div>
    </section>
  </main>

  <!-- MODAL: Add/Edit -->
  <dialog id="addModal" class="modal">
    <form method="dialog" class="modal-box" id="addForm" onsubmit="return false;">
      <button type="button" class="modal-close-x" onclick="document.getElementById('addModal').close()" aria-label="Close" style="position:absolute;top:18px;right:18px;background:none;border:none;font-size:22px;color:#cfd6e6;cursor:pointer;">&times;</button>
      <h3 id="modalTitle" class="modal-title">Add Game</h3>
      <div class="form-grid">
        <div class="col-span-2">
          <label class="label">Title</label>
          <input id="gameTitle" class="input" placeholder="Title" required/>
        </div>
        <div>
          <label class="label">Status</label>
          <div class="inline-field">
            <div class="select-wrap" style="flex:1">
              <select id="gameStatus" class="input">
                <option value="Backlog">Backlog</option>
                <option value="Playing">Playing</option>
                <option value="Played">Played</option>
                <option value="Favorites">Favorites</option>
              </select>
            </div>
          </div>
        </div>
        <div class="col-span-2">
          <label class="label">Rating</label>
          <div id="ratingStars" class="rating-select">
            <i class="material-icons star" data-val="1">star</i>
            <i class="material-icons star" data-val="2">star</i>
            <i class="material-icons star" data-val="3">star</i>
            <i class="material-icons star" data-val="4">star</i>
            <i class="material-icons star" data-val="5">star</i>
          </div>
        </div>
      </div>
      <div class="actions">
        <button id="modalDeleteBtn" type="button" class="btn btn-danger hidden">Delete</button>
        <button id="saveBtn" class="btn btn-primary">Save</button>
      </div>
    </form>
  </dialog>

  <!-- MODAL: Confirm delete -->
  <dialog id="confirmDelete" class="modal">
    <form method="dialog" class="modal-box">
      <h3 class="modal-title">Delete</h3>
      <p>Are you sure?</p>
      <div class="actions">
        <button id="confirmDeleteBtn" type="button" class="btn btn-danger">Delete</button>
        <button class="btn" onclick="document.getElementById('confirmDelete').close()">Cancel</button>
      </div>
    </form>
  </dialog>

  <div id="toast-container"></div>

  <!-- caminho correto -->
  <script src="/js/app.js"></script>
</body>
</html>
